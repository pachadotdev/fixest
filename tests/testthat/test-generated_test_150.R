test_that("auto-generated test #150", {
  do_refactor <- FALSE
  do_sum_y <- FALSE
  nthreads <- 4
  obs2keep <- 0L
  only_slope <- FALSE
  r_x_sizes <- 0L
  rm_0 <- TRUE
  rm_1 <- FALSE
  rm_single <- FALSE
  x <- structure(list(species = c("setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "setosa", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "versicolor", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica", "virginica")), row.names = 7:150, class = "data.frame")
  y <- c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 9.11088647433434, 9.96691048837361, 8.35647002889644, 6.9743039932239, 7.89931102737045, 8.41446865479267, 10.754034972509, 6.40360002663061, 7.33391952208522, 7.21430713044339, 3.58257966521518, 8.45040101986545, 5.10390092639781, 7.56979823392004, 7.43143019459275, 8.76742554333585, 9.25802803503347, 7.22836494239258, 6.72578063852627, 7.38228469251829, 11.7719620008606, 8.13062219202837, 5.54573297206443, 6.66370589341587, 7.24881096963204, 7.41952201619729, 5.79557371820986, 9.22924243852754, 8.72963884677214, 6.51580493560046, 6.6394489478791, 4.18109252922634, 6.73283851624684, 7.04060802745212, 8.35584191965814, 11.6150831188912, 8.18947124919533, 5.57023170039531, 8.0636762174183, 5.88976086792879, 6.32619977832305, 9.53070598803402, 7.39797521316998, 8.12277844000288, 7.63452290165993, 9.65533573509658, 6.73019529819765, 8.07452909727065, 6.07935156708618, 6.33321613109921, 11.3562004323063, 8.24466640610495, 8.05279364971087, 8.44856309020286, 8.16911769424359, 9.55717175466385, 6.13789729122012, 7.45236231205564, 5.78192673897734, 14.0047567182588, 10.2433058952457, 8.36664535742661, 9.55814349873904, 6.94196758230812, 8.49777406544, 9.91296248827397, 8.69546250631229, 12.885091089759, 8.23029443264774, 5.0023344501882, 9.94585240173763, 8.69611119156649, 7.26728379188147, 7.11918786634167, 10.4839278295236, 11.5706100945616, 6.47544129462953, 10.4310708617949, 8.94659327537789, 10.2811363393084, 7.85838877323316, 15.0937825787624, 9.23495947832364, 8.12854767517201, 7.78198597572702, 8.67057570505907, 9.50196979191563, 10.7894030459086, 10.0802723711786, 11.3212874591114, 9.02397760577065, 8.16402611646647, 6.4746786620661, 10.3644285095674, 9.99400722855403, 8.48080690505564, 5.68824024892699, 8.59026378210924, 12.8300248194269, 9.50762965936927)
  result <- cpppar_quf_table_sum(x, y, do_sum_y, rm_0, rm_1, rm_single, only_slope, nthreads, do_refactor, r_x_sizes, obs2keep)
  expected_result <- list(quf = list(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L)), items = list(c(45, 95)), table = list(c(50L, 50L)), sum_y = list(0L), obs_removed = c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE), fe_removed = list(1))

  expect_identical(result, expected_result)
})
