pkgload::load_all()

# fepois(mpg ~ wt, data = mtcars, glm.iter = 3)

z <- c(3.04453370398913, 3.04453370398913, 3.12677009833312, 3.06340177234292, 2.92853772089973, 2.89592708858824, 2.66028376213751, 3.19459148489762, 3.12677009833312, 2.95492374876058, 2.87921412066794, 2.79729977484593, 2.8507230797837, 2.72131688068597, 2.34185144763967, 2.34185144763967, 2.68787042401331, 3.47816316625877, 3.41444799508878, 3.52341934814557, 3.06806368506049, 2.74086065784523, 2.72131688068597, 2.5877920203897, 2.95492374876058, 3.30689337835753, 3.25810389670413, 3.41444799508878, 2.76002980105009, 2.98063143264998, 2.70807222726459, 3.06340177234292)
z <- z[1:5]

X <- c(2.62,2.875,2.32,3.215,3.44,3.46,
           3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,
           5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,
           1.935,2.14,1.513,3.17,2.77,3.57,2.78)
X <- X[1:5]

w <- c(21.1, 21.1, 22.9, 21.5, 18.8, 18.2, 14.4, 24.5, 22.9, 19.3, 17.9, 16.5, 17.4, 15.3, 10.5, 10.5, 14.8, 32.5, 30.5, 34, 21.6, 15.6, 15.3, 13.4, 19.3, 27.4, 26.1, 30.5, 15.9, 19.8, 15.1, 21.5)
w <- w[1:5]

df <- data.frame(z = z, X = X, w = w)

w * X

# w = 1

foo = feols(fml = z ~ X, data = df, weights = w)

# y <- z
# X <- cbind(1,X)
# colnames(X) <- c("(Intercept)","wt")
